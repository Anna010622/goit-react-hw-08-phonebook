"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[426],{7426:function(e,n,t){t.r(n),t.d(n,{default:function(){return ce}});var r=t(4087),i=t(1413),o=t(9439),s=t(9434),a=t(1134),l=t(4695),c=t(8007),u=t(6052),d=t(6351),h=t(1252),x=t(3665),p=t(5946),f=t(2392),m=t(8208),g=t(311),j=t(7806),b=t(1175),v=t(9140),C=t(4125),y=t(2435),I=t(2791),w=t(1836),S=t(8656),D=t(184),Z=c.Ry({name:c.Z_().required("Name is required").min(3,"Name must be no less than 3 characters long").matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name may contain only letters, apostrophe, dash and spaces"),number:c.Z_().required("Number is required").transform((function(e){return e.replace(/\D+/g,"")})).min(7,"Number phone must be no less than 7 characters long").max(12,"Number phone must be no more than 12 digits")}).required(),$=function(){var e=(0,I.useState)(!1),n=(0,o.Z)(e,2),t=n[0],r=n[1],c=(0,s.I0)(),$=(0,s.v9)(d.Af),_=(0,s.v9)(d.Y),k=(0,w.p)();(0,I.useEffect)((function(){_||r(!1)}),[_]);var z=(0,a.cI)({mode:"onTouched",resolver:(0,l.X)(Z)}),L=z.register,N=z.handleSubmit,A=z.reset,q=z.formState.errors,P=(0,h.ff)("teal.50","#0a192f"),R=(0,h.ff)("teal.800","teal.500");return(0,D.jsxs)(x.g,{onSubmit:N((function(e){var n=e.name,t=e.number;return r(!0),$.find((function(e){return e.name.toLowerCase()===n.toLowerCase()}))?k({title:"".concat(n," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):$.find((function(e){return e.number===t}))?k({title:"".concat(t," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):(c((0,u.uK)({name:n,number:t})).unwrap().then((function(){k({title:"Contact has been added",isClosable:!0,position:"top-right",status:"success",duration:3e3})})).catch((function(){return k({title:"Something went wrong. Please try again later",isClosable:!0,position:"top-right",status:"error",duration:3e3})})),void A())})),as:"form",mx:"auto",justifyContent:"center",mb:6,p:"4",maxH:"fit",children:[(0,D.jsx)(p.X,{children:"Create new contact"}),(0,D.jsxs)(f.NI,{isInvalid:q.name,isRequired:!0,children:[(0,D.jsx)(m.l,{fontWeight:"600",children:"Name"}),(0,D.jsxs)(g.B,{children:[(0,D.jsx)(j.Z,{pointerEvents:"none",children:(0,D.jsx)(b.q,{bg:R,size:"xs"})}),(0,D.jsx)(v.I,(0,i.Z)((0,i.Z)({type:"text",placeholder:"Enter contact name",_placeholder:{opacity:.5,color:"inherit"}},L("name")),{},{bg:P}))]}),(0,D.jsx)(C.J1,{children:q.name&&q.name.message})]}),(0,D.jsxs)(f.NI,{isInvalid:q.number,isRequired:!0,children:[(0,D.jsx)(m.l,{fontWeight:"600",children:"Phone"}),(0,D.jsxs)(g.B,{children:[(0,D.jsx)(j.Z,{pointerEvents:"none",children:(0,D.jsx)(S.q,{color:R})}),(0,D.jsx)(v.I,(0,i.Z)((0,i.Z)({type:"tel",placeholder:"Enter phone number",_placeholder:{opacity:.5,color:"inherit"}},L("number")),{},{bg:P}))]}),(0,D.jsx)(C.J1,{children:q.number&&q.number.message})]}),(0,D.jsx)(y.z,{type:"submit",variant:"outline",colorScheme:"teal",isLoading:_&&t,children:"Add contact"})]})},_=t(3541),k=t(6907),z=function(e){var n=e.onCancel,t=e.contact,r=(0,a.cI)({mode:"onTouched",resolver:(0,l.X)(Z)}),o=r.register,c=r.handleSubmit,p=r.formState,g=p.errors,j=p.isSubmitting,b=p.isValid,C=(0,s.v9)(d.Af),I=(0,w.p)(),S=(0,s.I0)(),$=(0,h.ff)("teal.50","#0a192f");return(0,D.jsxs)(x.g,{as:"form",spacing:4,onSubmit:c((function(e){var r=e.name,i=e.number;return t.name===r&&t.number===i?n():C.find((function(e){return e.name.toLowerCase()===r.toLowerCase()&&e.name.toLowerCase()!==t.name.toLowerCase()}))?I({title:"".concat(r," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):C.find((function(e){return e.number===i&&e.number!==t.number}))?I({title:"".concat(i," is already in contacts"),isClosable:!0,position:"top-right",status:"info",duration:3e3}):void S((0,u.Tk)({id:t.id,body:{name:r,number:i}})).unwrap().then((function(){I({title:"Contact updated",isClosable:!0,position:"top-right",status:"success",duration:3e3}),n()})).catch((function(){return I({title:"Something went wrong. Please try again later",isClosable:!0,position:"top-right",status:"error",duration:3e3})}))})),p:6,children:[(0,D.jsxs)(f.NI,{isInvalid:g.name,isRequired:!0,children:[(0,D.jsx)(m.l,{children:"Name"}),(0,D.jsx)(v.I,(0,i.Z)((0,i.Z)({type:"text"},o("name")),{},{defaultValue:null===t||void 0===t?void 0:t.name,bg:$}))]}),(0,D.jsxs)(f.NI,{isInvalid:g.number,isRequired:!0,children:[(0,D.jsx)(m.l,{children:"Phone"}),(0,D.jsx)(v.I,(0,i.Z)((0,i.Z)({type:"tel"},o("number")),{},{defaultValue:null===t||void 0===t?void 0:t.number,bg:$}))]}),(0,D.jsxs)(k.h,{display:"flex",justifyContent:"flex-end",children:[(0,D.jsx)(y.z,{onClick:n,variant:"outline",colorScheme:"teal",children:"Cancel"}),(0,D.jsx)(y.z,{isLoading:j,type:"submit",isDisabled:!b,colorScheme:"teal",children:"Save"})]})]})},L=t(5548).EditIcon,N=t(2144),A=N.useDisclosure,q=N.Popover,P=N.PopoverTrigger,R=N.IconButton,F=N.PopoverContent,B=N.FocusLock,O=N.PopoverArrow,T=N.PopoverCloseButton,E=N.Portal,V=t(2791).useRef,Y=function(e){var n=e.contact,t=A(),r=t.onOpen,i=t.onClose,o=t.isOpen,s=V(null);return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(q,{isOpen:o,initialFocusRef:s,onOpen:r,onClose:i,closeOnBlur:!0,children:[(0,D.jsx)(P,{children:(0,D.jsx)(R,{w:8,h:8,icon:(0,D.jsx)(L,{}),variant:"outline",colorScheme:"teal",_hover:{bg:"teal.100"},_focus:{bg:"teal.100"}})}),(0,D.jsx)(E,{children:(0,D.jsx)(F,{children:(0,D.jsxs)(B,{returnFocus:!0,persistentFocus:!1,children:[(0,D.jsx)(O,{}),(0,D.jsx)(T,{}),(0,D.jsx)(z,{onCancel:i,contact:n})]})})})]})})},X=function(e){return 12===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{2})(\d{3})(\d{4}).*/,"+$1-$2-$3-$4"):11===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{2})(\d{2})(\d{3})(\d{4}).*/,"+$1-$2-$3-$4"):10===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{3})(\d{4}).*/,"$1-$2-$3"):9===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{2})(\d{3})(\d{4}).*/,"$1-$2-$3"):7===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{4}).*/,"$1-$2"):e},G=t(9327),H=t(8348),W=t(5410),J=t(80),K=t(581),U=t(1211),M=t(7970),Q=t(1216),ee=t(6982),ne=function(e){var n=e.onClick,t=e.isDeleting,r=(0,H.q)(),i=r.isOpen,o=r.onOpen,s=r.onClose,a=(0,I.useRef)();return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(y.z,{type:"button",onClick:o,disabled:t,colorScheme:"teal",variant:"outline",w:8,h:8,_hover:{bg:"teal.100"},_focus:{bg:"teal.100"},children:t?(0,D.jsx)(W.D,{isIndeterminate:!0,color:"teal.800",size:"16px"}):(0,D.jsx)(G.p,{color:"teal.700"})}),(0,D.jsxs)(J.a,{motionPreset:"slideInBottom",leastDestructiveRef:a,onClose:s,isOpen:i,isCentered:!0,children:[(0,D.jsx)(K.Z,{}),(0,D.jsxs)(J._,{children:[(0,D.jsx)(U.x,{children:"Discard Changes?"}),(0,D.jsx)(M.o,{}),(0,D.jsx)(Q.f,{children:"Are you sure? You can't undo this action afterwards."}),(0,D.jsxs)(ee.m,{children:[(0,D.jsx)(y.z,{ref:a,onClick:s,colorScheme:"teal",children:"No"}),(0,D.jsx)(y.z,{colorScheme:"red",isLoading:t,ml:3,onClick:n,children:"Yes"})]})]})]})]})},te=function(e){var n=e.contact,t=(0,I.useState)(!1),i=(0,o.Z)(t,2),a=i[0],l=i[1],c=(0,s.I0)(),d=(0,h.ff)("#ffffff","#0a192f");return(0,D.jsxs)(_.HC,{paddingLeft:{base:"12px",md:"35px",lg:"40px"},paddingRight:{base:"12px",md:"20px"},paddingTop:1,paddingBottom:1,display:"flex",alignItems:"center",justifyContent:"space-between",bg:d,opacity:"0.8",borderRadius:"5px",children:[(0,D.jsxs)(r.xu,{flexBasis:"40%",children:[n.name," "]}),(0,D.jsx)(r.xu,{flexBasis:"40%",children:X(n.number)}),(0,D.jsxs)(r.xu,{flexBasis:"20%",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:{base:"5px",md:"10px"},children:[(0,D.jsx)(Y,{contact:n}),(0,D.jsx)(ne,{onClick:function(){c((0,u.GK)(n.id)),l(!0)},isDeleting:a})]})]},n.id)},re=t(896),ie=t(9229),oe=function(){var e=(0,s.I0)(),n=(0,s.v9)(d.Af),t=(0,s.v9)(d.AD),i=(0,s.v9)(d.Y);(0,I.useEffect)((function(){e((0,u.yF)())}),[e]);var o=function(){var e=t.toLowerCase();return n.filter((function(n){return(null===n||void 0===n?void 0:n.name.toLowerCase().includes(e))||(null===n||void 0===n?void 0:n.number.includes(t))}))},a=o().map((function(e){return e.name[0].toUpperCase()})).filter((function(e,n,t){return t.indexOf(e)===n})),l=function(e){return o().filter((function(n){return n.name[0].toUpperCase()===e}))},c=(0,h.ff)("teal.100","#172a46");return(0,D.jsxs)("div",{children:[0===n.length&&i&&(0,D.jsx)(re.M,{children:(0,D.jsx)(W.D,{isIndeterminate:!0,color:"teal.800"})}),0===n.length&&!i&&(0,D.jsx)(ie.x,{textAlign:"center",fontSize:"2xl",children:"There are no contacts yet. Please add a new contact"}),0===o().length&&0!==n.length&&(0,D.jsx)(ie.x,{children:"There is no such contact"}),0!==n.length&&o().length>0&&(0,D.jsx)(r.xu,{position:"relative",children:(0,D.jsx)(_.aV,{position:"relative",children:a.map((function(e){return(0,D.jsx)(_.HC,{children:(0,D.jsxs)(_.aV,{children:[(0,D.jsx)(p.X,{position:"sticky",top:"15px",bg:c,paddingLeft:"5px",opacity:"0.8",borderRadius:"5px",children:e}),(0,D.jsx)(r.xu,{children:l(e).map((function(e){return(0,D.jsx)(te,{contact:e},e.id)}))})]})},"section-".concat(e))}))})})]})},se=t(123),ae=t(6895),le=function(){var e=(0,s.v9)(d.AD),n=(0,s.v9)(d.Af),t=(0,s.I0)(),r=(0,h.ff)("#ffffff","#172a46"),i=(0,h.ff)("#086F83 0px 0px 10px","#5ff0d0 0px 0px 10px");return(0,D.jsx)(D.Fragment,{children:0!==n.length&&(0,D.jsxs)(f.NI,{mb:6,children:[(0,D.jsx)(m.l,{fontSize:"lg",fontWeight:"600",children:"Find contacts by name or phone number"}),(0,D.jsx)(v.I,{name:"filter",type:"text",value:e,onChange:function(e){return t((0,ae.T)(e.target.value))},pos:"relative",bg:r,boxShadow:i}),(0,D.jsx)(se.G,{pos:"absolute",top:"50%",transform:"translateY(50%)",right:"16px",zIndex:2})]})})},ce=function(){return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(r.xu,{display:{lg:"flex"},gap:8,alignItems:"flex-start",children:[(0,D.jsx)($,{}),(0,D.jsxs)(r.xu,{flexGrow:1,children:[(0,D.jsx)(le,{}),(0,D.jsx)(oe,{})]})]})})}}}]);
//# sourceMappingURL=426.36ca7fa9.chunk.js.map