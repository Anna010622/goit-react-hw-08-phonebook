"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[426],{7426:function(e,n,t){t.r(n),t.d(n,{default:function(){return ie}});var r=t(4087),i=t(1413),s=t(9439),a=t(9434),o=t(1134),l=t(4695),c=t(8007),u=t(6052),d=t(6351),x=t(1252),h=t(3665),p=t(5946),f=t(2392),m=t(8208),g=t(9140),j=t(4125),b=t(2435),v=t(2791),C=t(1836),I=t(184),y=c.Ry({name:c.Z_().required("Name is required").min(3,"Name must be no less than 3 characters long").matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name may contain only letters, apostrophe, dash and spaces"),number:c.Z_().required("Number is required").transform((function(e){return e.replace(/\D+/g,"")})).min(7,"Number phone must be no less than 7 characters long").max(12,"Number phone must be no more than 12 digits")}).required(),w=function(){var e=(0,v.useState)(!1),n=(0,s.Z)(e,2),t=n[0],r=n[1],c=(0,a.I0)(),w=(0,a.v9)(d.Af),D=(0,a.v9)(d.Y),S=(0,C.p)();(0,v.useEffect)((function(){D||r(!1)}),[D]);var $=(0,o.cI)({mode:"onTouched",resolver:(0,l.X)(y)}),Z=$.register,k=$.handleSubmit,_=$.reset,N=$.formState.errors,z=(0,x.ff)("teal.50","#0a192f");return(0,I.jsxs)(h.g,{onSubmit:k((function(e){var n=e.name,t=e.number;if(r(!0),w.find((function(e){return e.name.toLowerCase()===n.toLowerCase()})))return S({title:"".concat(n," is already in contacts"),variant:"subtle",isClosable:!0,position:"top-right",status:"warning",duration:3e3});c((0,u.uK)({name:n,number:t})),_()})),as:"form",mx:"auto",justifyContent:"center",mb:6,p:"4",maxH:"fit",children:[(0,I.jsx)(p.X,{children:"Create new contact"}),(0,I.jsxs)(f.NI,{isInvalid:N.name,isRequired:!0,children:[(0,I.jsx)(m.l,{fontWeight:"600",children:"Name"}),(0,I.jsx)(g.I,(0,i.Z)((0,i.Z)({type:"text"},Z("name")),{},{bg:z})),(0,I.jsx)(j.J1,{children:N.name&&N.name.message})]}),(0,I.jsxs)(f.NI,{isInvalid:N.number,isRequired:!0,children:[(0,I.jsx)(m.l,{fontWeight:"600",children:"Phone"}),(0,I.jsx)(g.I,(0,i.Z)((0,i.Z)({type:"tel"},Z("number")),{},{bg:z})),(0,I.jsx)(j.J1,{children:N.number&&N.number.message})]}),(0,I.jsx)(b.z,{type:"submit",variant:"outline",colorScheme:"teal",isLoading:D&&t,children:"Add contact"})]})},D=t(3541),S=t(6907),$=function(e){var n=e.onCancel,t=e.contact,r=(0,o.cI)({mode:"onTouched",resolver:(0,l.X)(y)}),s=r.register,c=r.handleSubmit,d=r.formState,p=d.errors,j=d.isSubmitting,v=d.isValid,w=(0,C.p)(),D=(0,a.I0)(),$=(0,x.ff)("teal.50","#0a192f");return(0,I.jsxs)(h.g,{as:"form",spacing:4,onSubmit:c((function(e){var r=e.name,i=e.number;D((0,u.Tk)({id:t.id,body:{name:r,number:i}})).unwrap().then((function(){w({title:"Contact updated",variant:"subtle",isClosable:!0,position:"top-right",status:"success",duration:3e3}),n()})).catch((function(){return w({title:"Something went wrong. Please try again later",variant:"subtle",isClosable:!0,position:"top-right",status:"error",duration:3e3})}))})),p:6,children:[(0,I.jsxs)(f.NI,{isInvalid:p.name,isRequired:!0,children:[(0,I.jsx)(m.l,{children:"Name"}),(0,I.jsx)(g.I,(0,i.Z)((0,i.Z)({type:"text"},s("name")),{},{defaultValue:null===t||void 0===t?void 0:t.name,bg:$}))]}),(0,I.jsxs)(f.NI,{isInvalid:p.number,isRequired:!0,children:[(0,I.jsx)(m.l,{children:"Phone"}),(0,I.jsx)(g.I,(0,i.Z)((0,i.Z)({type:"tel"},s("number")),{},{defaultValue:null===t||void 0===t?void 0:t.number,bg:$}))]}),(0,I.jsxs)(S.h,{display:"flex",justifyContent:"flex-end",children:[(0,I.jsx)(b.z,{onClick:n,variant:"outline",colorScheme:"teal",children:"Cancel"}),(0,I.jsx)(b.z,{isLoading:j,type:"submit",isDisabled:!v,colorScheme:"teal",children:"Save"})]})]})},Z=t(5548).EditIcon,k=t(2144),_=k.useDisclosure,N=k.Popover,z=k.PopoverTrigger,A=k.IconButton,F=k.PopoverContent,R=k.FocusLock,q=k.PopoverArrow,L=k.PopoverCloseButton,P=t(2791).useRef,O=function(e){var n=e.contact,t=_(),r=t.onOpen,i=t.onClose,s=t.isOpen,a=P(null);return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(N,{isOpen:s,initialFocusRef:a,onOpen:r,onClose:i,closeOnBlur:!0,children:[(0,I.jsx)(z,{children:(0,I.jsx)(A,{w:8,h:8,icon:(0,I.jsx)(Z,{}),variant:"outline",colorScheme:"teal",_hover:{bg:"teal.100"},_focus:{bg:"teal.100"}})}),(0,I.jsx)(F,{children:(0,I.jsxs)(R,{returnFocus:!0,persistentFocus:!1,children:[(0,I.jsx)(q,{}),(0,I.jsx)(L,{}),(0,I.jsx)($,{onCancel:i,contact:n})]})})]})})},B=function(e){return 12===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{2})(\d{3})(\d{4}).*/,"+$1-$2-$3-$4"):11===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{2})(\d{2})(\d{3})(\d{4}).*/,"+$1-$2-$3-$4"):10===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{3})(\d{4}).*/,"$1-$2-$3"):9===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{2})(\d{3})(\d{4}).*/,"$1-$2-$3"):7===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{4}).*/,"$1-$2"):e},T=t(9327),V=t(8348),Y=t(5410),X=t(80),E=t(581),G=t(1211),H=t(7970),W=t(1216),J=t(6982),K=function(e){var n=e.onClick,t=e.isDeleting,r=(0,V.q)(),i=r.isOpen,s=r.onOpen,a=r.onClose,o=(0,v.useRef)();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(b.z,{type:"button",onClick:s,disabled:t,colorScheme:"teal",variant:"outline",w:8,h:8,_hover:{bg:"teal.100"},_focus:{bg:"teal.100"},children:t?(0,I.jsx)(Y.D,{isIndeterminate:!0,color:"teal.800",size:"16px"}):(0,I.jsx)(T.p,{color:"teal.700"})}),(0,I.jsxs)(X.a,{motionPreset:"slideInBottom",leastDestructiveRef:o,onClose:a,isOpen:i,isCentered:!0,children:[(0,I.jsx)(E.Z,{}),(0,I.jsxs)(X._,{children:[(0,I.jsx)(G.x,{children:"Discard Changes?"}),(0,I.jsx)(H.o,{}),(0,I.jsx)(W.f,{children:"Are you sure? You can't undo this action afterwards."}),(0,I.jsxs)(J.m,{children:[(0,I.jsx)(b.z,{ref:o,onClick:a,colorScheme:"teal",children:"No"}),(0,I.jsx)(b.z,{colorScheme:"red",isLoading:t,ml:3,onClick:n,children:"Yes"})]})]})]})]})},U=function(e){var n=e.contact,t=(0,v.useState)(!1),i=(0,s.Z)(t,2),o=i[0],l=i[1],c=(0,a.I0)();return(0,I.jsxs)(D.HC,{paddingLeft:{base:"12px",md:"35px",lg:"40px"},paddingRight:{base:"12px",md:"20px"},paddingTop:1,paddingBottom:1,display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,I.jsxs)(r.xu,{flexBasis:"40%",children:[n.name,": "]}),(0,I.jsx)(r.xu,{flexBasis:"40%",children:B(n.number)}),(0,I.jsxs)(r.xu,{flexBasis:"20%",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:{base:"5px",md:"10px"},children:[(0,I.jsx)(O,{contact:n}),(0,I.jsx)(K,{onClick:function(){c((0,u.GK)(n.id)),l(!0)},isDeleting:o})]})]},n.id)},M=t(896),Q=t(2347),ee=function(){var e=(0,a.I0)(),n=(0,a.v9)(d.Af),t=(0,a.v9)(d.AD),i=(0,a.v9)(d.Y);(0,v.useEffect)((function(){e((0,u.yF)())}),[e]);var s=function(){var e=t.toLowerCase();return n.filter((function(n){return null===n||void 0===n?void 0:n.name.toLowerCase().includes(e)}))},o=s().map((function(e){return e.name[0].toUpperCase()})).filter((function(e,n,t){return t.indexOf(e)===n})),l=function(e){return s().filter((function(n){return n.name[0].toUpperCase()===e}))},c=(0,x.ff)("teal.100","#172a46");return(0,I.jsxs)("div",{children:[0===n.length&&i&&(0,I.jsx)(M.M,{children:(0,I.jsx)(Y.D,{isIndeterminate:!0,color:"teal.800"})}),0===n.length&&!i&&(0,I.jsx)(Q.x,{textAlign:"center",fontSize:"2xl",children:"There are no contacts yet. Please add a new contact"}),0===s().length&&0!==n.length&&(0,I.jsx)(Q.x,{children:"There is no such contact"}),0!==n.length&&s().length>0&&(0,I.jsx)(r.xu,{position:"relative",children:(0,I.jsx)(D.aV,{position:"relative",children:o.map((function(e){return(0,I.jsx)(D.HC,{children:(0,I.jsxs)(D.aV,{children:[(0,I.jsx)(p.X,{position:"sticky",top:"15px",bg:c,paddingLeft:"5px",opacity:"0.8",borderRadius:"5px",children:e}),(0,I.jsx)(r.xu,{children:l(e).map((function(e){return(0,I.jsx)(U,{contact:e},e.id)}))})]})},"section-".concat(e))}))})})]})},ne=t(123),te=t(6895),re=function(){var e=(0,a.v9)(d.AD),n=(0,a.v9)(d.Af),t=(0,a.I0)(),r=(0,x.ff)("#ffffff","#172a46"),i=(0,x.ff)("#086F83 0px 0px 10px","#5ff0d0 0px 0px 10px");return(0,I.jsx)(I.Fragment,{children:0!==n.length&&(0,I.jsxs)(f.NI,{mb:6,children:[(0,I.jsx)(m.l,{fontSize:"lg",fontWeight:"600",children:"Find contacts by name"}),(0,I.jsx)(g.I,{name:"filter",type:"text",value:e,onChange:function(e){return t((0,te.T)(e.target.value))},pos:"relative",bg:r,boxShadow:i}),(0,I.jsx)(ne.G,{pos:"absolute",top:"50%",transform:"translateY(50%)",right:"16px",zIndex:2})]})})},ie=function(){return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(r.xu,{display:{lg:"flex"},gap:8,alignItems:"flex-start",children:[(0,I.jsx)(w,{}),(0,I.jsxs)(r.xu,{flexGrow:1,children:[(0,I.jsx)(re,{}),(0,I.jsx)(ee,{})]})]})})}}}]);
//# sourceMappingURL=426.d7803050.chunk.js.map