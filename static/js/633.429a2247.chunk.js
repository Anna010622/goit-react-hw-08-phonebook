"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[633],{3633:function(e,n,r){r.r(n),r.d(n,{default:function(){return te}});var t=r(4087),o=r(1413),i=r(9434),s=r(1134),a=r(4695),l=r(8007),c=r(6052),d=r(6351),u=r(9085),x=r(1252),h=r(2610),m=r(5946),f=r(2392),p=r(8208),j=r(9140),g=r(4125),b=r(2435),v=r(184),I=l.Ry({name:l.Z_().required("Name is required").min(3,"Name must be no less than 3 characters long").matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name may contain only letters, apostrophe, dash and spaces"),number:l.Z_().required("Number is required").transform((function(e){return e.replace(/\D+/g,"")})).min(7,"Number phone must be no less than 7 characters long").max(12,"Number phone must be no more than 12 digits")}).required(),S=function(){var e=(0,i.I0)(),n=(0,i.v9)(d.K2),r=(0,s.cI)({mode:"onTouched",resolver:(0,a.X)(I)}),t=r.register,l=r.handleSubmit,S=r.reset,y=r.formState.errors,C=(0,x.ff)("teal.50","#0a192f");return(0,v.jsxs)(h.g,{onSubmit:l((function(r){var t=r.name,o=r.number;if(n.find((function(e){return e.name.toLowerCase()===t.toLowerCase()})))return u.Am.warn("".concat(t," is already in contacts"));e((0,c.uK)({name:t,number:o})),S()})),as:"form",mx:"auto",justifyContent:"center",mb:6,p:"4",maxH:"fit",children:[(0,v.jsx)(m.X,{children:"Create new contact"}),(0,v.jsxs)(f.NI,{isInvalid:y.name,isRequired:!0,children:[(0,v.jsx)(p.l,{fontWeight:"600",children:"Name"}),(0,v.jsx)(j.I,(0,o.Z)((0,o.Z)({type:"text"},t("name")),{},{bg:C})),(0,v.jsx)(g.J1,{children:y.name&&y.name.message})]}),(0,v.jsxs)(f.NI,{isInvalid:y.number,isRequired:!0,children:[(0,v.jsx)(p.l,{fontWeight:"600",children:"Phone"}),(0,v.jsx)(j.I,(0,o.Z)((0,o.Z)({type:"tel"},t("number")),{},{bg:C})),(0,v.jsx)(g.J1,{children:y.number&&y.number.message})]}),(0,v.jsx)(b.z,{type:"submit",variant:"outline",colorScheme:"teal",children:"Add contact"})]})},y=r(9439),C=r(9327),w=r(3129),z=r(4004),$=r(176),D=r(5410),N=r(6907),T=function(e){var n=e.onCancel,r=e.contact,t=(0,s.cI)({mode:"onTouched",resolver:(0,a.X)(I)}),l=t.register,d=t.handleSubmit,m=t.formState,g=m.errors,S=m.isSubmitting,y=m.isValid,C=(0,i.I0)(),w=(0,x.ff)("teal.50","#0a192f");return(0,v.jsxs)(h.g,{as:"form",spacing:4,onSubmit:d((function(e){var t=e.name,o=e.number;C((0,c.Tk)({id:r.id,body:{name:t,number:o}})).unwrap().then((function(){u.Am.success("Contact updated"),n()})).catch((function(){return u.Am.error("Something went wrong. Please try again later")}))})),p:6,children:[(0,v.jsxs)(f.NI,{isInvalid:g.name,isRequired:!0,children:[(0,v.jsx)(p.l,{children:"Name"}),(0,v.jsx)(j.I,(0,o.Z)((0,o.Z)({type:"text"},l("name")),{},{defaultValue:null===r||void 0===r?void 0:r.name,bg:w}))]}),(0,v.jsxs)(f.NI,{isInvalid:g.number,isRequired:!0,children:[(0,v.jsx)(p.l,{children:"Phone"}),(0,v.jsx)(j.I,(0,o.Z)((0,o.Z)({type:"tel"},l("number")),{},{defaultValue:null===r||void 0===r?void 0:r.number,bg:w}))]}),(0,v.jsxs)(N.h,{display:"flex",justifyContent:"flex-end",children:[(0,v.jsx)(b.z,{onClick:n,variant:"outline",colorScheme:"teal",children:"Cancel"}),(0,v.jsx)(b.z,{isLoading:S,type:"submit",isDisabled:!y,colorScheme:"teal",children:"Save"})]})]})},Z=r(5548).EditIcon,k=r(2144),F=k.useDisclosure,P=k.Popover,_=k.PopoverTrigger,q=k.IconButton,A=k.PopoverContent,K=k.FocusLock,R=k.PopoverArrow,L=k.PopoverCloseButton,O=r(2791).useRef,B=function(e){var n=e.contact,r=F(),t=r.onOpen,o=r.onClose,i=r.isOpen,s=O(null);return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(P,{isOpen:i,initialFocusRef:s,onOpen:t,onClose:o,placement:"right",closeOnBlur:!0,children:[(0,v.jsx)(_,{children:(0,v.jsx)(q,{w:8,h:8,icon:(0,v.jsx)(Z,{}),variant:"outline",colorScheme:"teal"})}),(0,v.jsx)(A,{children:(0,v.jsxs)(K,{returnFocus:!0,persistentFocus:!1,children:[(0,v.jsx)(R,{}),(0,v.jsx)(L,{}),(0,v.jsx)(T,{onCancel:o,contact:n})]})})]})})},W=r(2791),G=function(e){return 12===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{2})(\d{3})(\d{4}).*/,"+$1-$2-$3-$4"):11===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{2})(\d{2})(\d{3})(\d{4}).*/,"+$1-$2-$3-$4"):10===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{3})(\d{4}).*/,"$1-$2-$3"):9===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{2})(\d{3})(\d{4}).*/,"$1-$2-$3"):7===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{4}).*/,"$1-$2"):e},V=function(e){var n=e.contact,r=(0,W.useState)(!1),t=(0,y.Z)(r,2),o=t[0],s=t[1],a=(0,i.I0)();return(0,v.jsxs)(w.Tr,{children:[(0,v.jsx)(z.Td,{p:{base:"5px",md:"8px"},children:n.name}),(0,v.jsx)(z.Td,{p:{base:"5px",md:"8px"},children:G(n.number)}),(0,v.jsx)(z.Td,{p:{base:"5px",md:"8px"},children:(0,v.jsxs)($.k,{gap:"2",alignItems:"center",justifyContent:"flex-end",children:[(0,v.jsx)(B,{contact:n}),(0,v.jsx)(b.z,{type:"button",onClick:function(){a((0,c.GK)(n.id)),s(!0)},disabled:o,p:0,w:8,h:8,variant:"outline",colorScheme:"teal",children:o?(0,v.jsx)(D.D,{isIndeterminate:!0,color:"teal.800",size:"16px"}):(0,v.jsx)(C.p,{boxSize:4,p:"0"})})]})})]},n.id)},X=r(896),E=r(2347),J=r(1900),H=r(2732),M=r(553),Y=r(5237),Q=r(8500),U=function(){var e=(0,i.I0)(),n=(0,i.v9)(d.K2),r=(0,i.v9)(d.zK),t=(0,i.v9)(d.Kv);(0,W.useEffect)((function(){e((0,c.yF)())}),[e]);var o=function(){var e=r.toLowerCase();return n.filter((function(n){return null===n||void 0===n?void 0:n.name.toLowerCase().includes(e)}))},s=(0,x.ff)("#ffffff","#172a46"),a=(0,x.ff)("#086F83 0px 0px 10px","#5ff0d0 0px 0px 10px"),l=(0,x.ff)("gray.600","#5ff0d0");return(0,v.jsxs)("div",{children:[0===n.length&&t&&(0,v.jsx)(X.M,{children:(0,v.jsx)(D.D,{isIndeterminate:!0,color:"teal.800"})}),0===n.length&&!t&&(0,v.jsx)(E.x,{textAlign:"center",fontSize:"2xl",children:"There are no contacts yet. Please add a new contact"}),0===o().length&&0!==n.length&&(0,v.jsx)(E.x,{children:"There is no such contact"}),0!==n.length&&o().length>0&&(0,v.jsx)(J.x,{borderRadius:10,mb:6,boxShadow:a,p:4,bg:s,children:(0,v.jsxs)(H.i,{colorScheme:l,overflow:"hidden",size:"sm",children:[(0,v.jsx)(M.h,{fontWeight:"600",fontSize:8,borderBottom:"2px solid",borderColor:l,children:(0,v.jsxs)(w.Tr,{borderColor:"teal.600",children:[(0,v.jsx)(Y.Th,{children:(0,v.jsx)(E.x,{fontSize:16,color:l,children:"Name"})}),(0,v.jsx)(Y.Th,{colSpan:"2",children:(0,v.jsx)(E.x,{fontSize:16,color:l,children:"Phone number"})})]})}),(0,v.jsx)(Q.p,{children:o().map((function(e){return(0,v.jsx)(V,{contact:e},e.id)}))})]})})]})},ee=r(123),ne=r(6895),re=function(){var e=(0,i.v9)(d.zK),n=(0,i.v9)(d.K2),r=(0,i.I0)(),t=(0,x.ff)("#ffffff","#172a46"),o=(0,x.ff)("#086F83 0px 0px 10px","#5ff0d0 0px 0px 10px");return(0,v.jsx)(v.Fragment,{children:0!==n.length&&(0,v.jsxs)(f.NI,{mb:6,children:[(0,v.jsx)(p.l,{fontSize:"lg",fontWeight:"600",children:"Find contacts by name"}),(0,v.jsx)(j.I,{name:"filter",type:"text",value:e,onChange:function(e){return r((0,ne.T)(e.target.value))},pos:"relative",bg:t,boxShadow:o}),(0,v.jsx)(ee.G,{pos:"absolute",top:"50%",transform:"translateY(50%)",right:"16px",zIndex:2})]})})},te=function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(t.xu,{display:{md:"flex"},gap:8,alignItems:"flex-start",children:[(0,v.jsx)(S,{}),(0,v.jsxs)(t.xu,{flexGrow:1,children:[(0,v.jsx)(re,{}),(0,v.jsx)(U,{})]})]})})}}}]);
//# sourceMappingURL=633.429a2247.chunk.js.map