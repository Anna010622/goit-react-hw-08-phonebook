"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[633],{3633:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var r=t(4087),a=t(1413),i=t(9434),s=t(1134),o=t(4695),l=t(8007),c=t(6052),d=t(6351),u=t(9085),x=t(1252),h=t(3665),p=t(5946),f=t(2392),m=t(8208),g=t(9140),j=t(4125),b=t(2435),v=t(184),I=l.Ry({name:l.Z_().required("Name is required").min(3,"Name must be no less than 3 characters long").matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name may contain only letters, apostrophe, dash and spaces"),number:l.Z_().required("Number is required").transform((function(e){return e.replace(/\D+/g,"")})).min(7,"Number phone must be no less than 7 characters long").max(12,"Number phone must be no more than 12 digits")}).required(),y=function(){var e=(0,i.I0)(),n=(0,i.v9)(d.K2),t=(0,s.cI)({mode:"onTouched",resolver:(0,o.X)(I)}),r=t.register,l=t.handleSubmit,y=t.reset,C=t.formState.errors,w=(0,x.ff)("teal.50","#0a192f");return(0,v.jsxs)(h.g,{onSubmit:l((function(t){var r=t.name,a=t.number;if(n.find((function(e){return e.name.toLowerCase()===r.toLowerCase()})))return u.Am.warn("".concat(r," is already in contacts"));e((0,c.uK)({name:r,number:a})),y()})),as:"form",mx:"auto",justifyContent:"center",mb:6,p:"4",maxH:"fit",children:[(0,v.jsx)(p.X,{children:"Create new contact"}),(0,v.jsxs)(f.NI,{isInvalid:C.name,isRequired:!0,children:[(0,v.jsx)(m.l,{fontWeight:"600",children:"Name"}),(0,v.jsx)(g.I,(0,a.Z)((0,a.Z)({type:"text"},r("name")),{},{bg:w})),(0,v.jsx)(j.J1,{children:C.name&&C.name.message})]}),(0,v.jsxs)(f.NI,{isInvalid:C.number,isRequired:!0,children:[(0,v.jsx)(m.l,{fontWeight:"600",children:"Phone"}),(0,v.jsx)(g.I,(0,a.Z)((0,a.Z)({type:"tel"},r("number")),{},{bg:w})),(0,v.jsx)(j.J1,{children:C.number&&C.number.message})]}),(0,v.jsx)(b.z,{type:"submit",variant:"outline",colorScheme:"teal",children:"Add contact"})]})},C=t(9439),w=t(9327),S=t(3541),$=t(6907),D=function(e){var n=e.onCancel,t=e.contact,r=(0,s.cI)({mode:"onTouched",resolver:(0,o.X)(I)}),l=r.register,d=r.handleSubmit,p=r.formState,j=p.errors,y=p.isSubmitting,C=p.isValid,w=(0,i.I0)(),S=(0,x.ff)("teal.50","#0a192f");return(0,v.jsxs)(h.g,{as:"form",spacing:4,onSubmit:d((function(e){var r=e.name,a=e.number;w((0,c.Tk)({id:t.id,body:{name:r,number:a}})).unwrap().then((function(){u.Am.success("Contact updated"),n()})).catch((function(){return u.Am.error("Something went wrong. Please try again later")}))})),p:6,children:[(0,v.jsxs)(f.NI,{isInvalid:j.name,isRequired:!0,children:[(0,v.jsx)(m.l,{children:"Name"}),(0,v.jsx)(g.I,(0,a.Z)((0,a.Z)({type:"text"},l("name")),{},{defaultValue:null===t||void 0===t?void 0:t.name,bg:S}))]}),(0,v.jsxs)(f.NI,{isInvalid:j.number,isRequired:!0,children:[(0,v.jsx)(m.l,{children:"Phone"}),(0,v.jsx)(g.I,(0,a.Z)((0,a.Z)({type:"tel"},l("number")),{},{defaultValue:null===t||void 0===t?void 0:t.number,bg:S}))]}),(0,v.jsxs)($.h,{display:"flex",justifyContent:"flex-end",children:[(0,v.jsx)(b.z,{onClick:n,variant:"outline",colorScheme:"teal",children:"Cancel"}),(0,v.jsx)(b.z,{isLoading:y,type:"submit",isDisabled:!C,colorScheme:"teal",children:"Save"})]})]})},Z=t(5548).EditIcon,_=t(2144),N=_.useDisclosure,z=_.Popover,k=_.PopoverTrigger,F=_.IconButton,q=_.PopoverContent,A=_.FocusLock,P=_.PopoverArrow,R=_.PopoverCloseButton,K=t(2791).useRef,L=function(e){var n=e.contact,t=N(),r=t.onOpen,a=t.onClose,i=t.isOpen,s=K(null);return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(z,{isOpen:i,initialFocusRef:s,onOpen:r,onClose:a,closeOnBlur:!0,children:[(0,v.jsx)(k,{children:(0,v.jsx)(F,{w:8,h:8,icon:(0,v.jsx)(Z,{}),variant:"outline",colorScheme:"teal",_hover:{bg:"teal.100"},_focus:{bg:"teal.100"}})}),(0,v.jsx)(q,{children:(0,v.jsxs)(A,{returnFocus:!0,persistentFocus:!1,children:[(0,v.jsx)(P,{}),(0,v.jsx)(R,{}),(0,v.jsx)(D,{onCancel:a,contact:n})]})})]})})},T=t(2791),B=function(e){return 12===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{2})(\d{3})(\d{4}).*/,"+$1-$2-$3-$4"):11===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{2})(\d{2})(\d{3})(\d{4}).*/,"+$1-$2-$3-$4"):10===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{3})(\d{4}).*/,"$1-$2-$3"):9===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{2})(\d{3})(\d{4}).*/,"$1-$2-$3"):7===e.replace(/\D+/g,"").length?e.replace(/\D+/g,"").replace(/^(\d{3})(\d{4}).*/,"$1-$2"):e},O=function(e){var n=e.contact,t=(0,T.useState)(!1),a=(0,C.Z)(t,2),s=a[0],o=a[1],l=(0,i.I0)();return(0,v.jsxs)(S.HC,{paddingLeft:{base:"12px",md:"35px",lg:"40px"},paddingRight:{base:"12px",md:"20px"},paddingTop:1,paddingBottom:1,display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,v.jsxs)(r.xu,{flexBasis:"40%",children:[n.name,": "]}),(0,v.jsx)(r.xu,{flexBasis:"40%",children:B(n.number)}),(0,v.jsxs)(r.xu,{flexBasis:"20%",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:{base:"5px",md:"10px"},children:[(0,v.jsx)(L,{contact:n}),(0,v.jsx)(b.z,{type:"button",onClick:function(){l((0,c.GK)(n.id)),o(!0)},disabled:s,colorScheme:"teal",variant:"outline",w:8,h:8,_hover:{bg:"teal.100"},_focus:{bg:"teal.100"},children:s?(0,v.jsx)("span",{children:"deleting..."}):(0,v.jsx)(w.p,{color:"teal.700"})})]})]},n.id)},V=t(896),X=t(5410),G=t(2347),H=function(){var e=(0,i.I0)(),n=(0,i.v9)(d.K2),t=(0,i.v9)(d.zK),a=(0,i.v9)(d.Kv);(0,T.useEffect)((function(){e((0,c.yF)())}),[e]);var s=function(){var e=t.toLowerCase();return n.filter((function(n){return null===n||void 0===n?void 0:n.name.toLowerCase().includes(e)}))},o=s().map((function(e){return e.name[0].toUpperCase()})).filter((function(e,n,t){return t.indexOf(e)===n})),l=function(e){return s().filter((function(n){return n.name[0].toUpperCase()===e}))},u=(0,x.ff)("teal.100","#172a46");return(0,v.jsxs)("div",{children:[0===n.length&&a&&(0,v.jsx)(V.M,{children:(0,v.jsx)(X.D,{isIndeterminate:!0,color:"teal.800"})}),0===n.length&&!a&&(0,v.jsx)(G.x,{textAlign:"center",fontSize:"2xl",children:"There are no contacts yet. Please add a new contact"}),0===s().length&&0!==n.length&&(0,v.jsx)(G.x,{children:"There is no such contact"}),0!==n.length&&s().length>0&&(0,v.jsx)(r.xu,{position:"relative",children:(0,v.jsx)(S.aV,{position:"relative",children:o.map((function(e){return(0,v.jsx)(S.HC,{children:(0,v.jsxs)(S.aV,{children:[(0,v.jsx)(p.X,{position:"sticky",top:"15px",bg:u,paddingLeft:"5px",opacity:"0.8",borderRadius:"5px",children:e}),(0,v.jsx)(r.xu,{children:l(e).map((function(e){return(0,v.jsx)(O,{contact:e},e.id)}))})]})},"section-".concat(e))}))})})]})},W=t(123),E=t(6895),J=function(){var e=(0,i.v9)(d.zK),n=(0,i.v9)(d.K2),t=(0,i.I0)(),r=(0,x.ff)("#ffffff","#172a46"),a=(0,x.ff)("#086F83 0px 0px 10px","#5ff0d0 0px 0px 10px");return(0,v.jsx)(v.Fragment,{children:0!==n.length&&(0,v.jsxs)(f.NI,{mb:6,children:[(0,v.jsx)(m.l,{fontSize:"lg",fontWeight:"600",children:"Find contacts by name"}),(0,v.jsx)(g.I,{name:"filter",type:"text",value:e,onChange:function(e){return t((0,E.T)(e.target.value))},pos:"relative",bg:r,boxShadow:a}),(0,v.jsx)(W.G,{pos:"absolute",top:"50%",transform:"translateY(50%)",right:"16px",zIndex:2})]})})},U=function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(r.xu,{display:{lg:"flex"},gap:8,alignItems:"flex-start",children:[(0,v.jsx)(y,{}),(0,v.jsxs)(r.xu,{flexGrow:1,children:[(0,v.jsx)(J,{}),(0,v.jsx)(H,{})]})]})})}}}]);
//# sourceMappingURL=633.0d4dedde.chunk.js.map